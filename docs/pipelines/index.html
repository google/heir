<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.113.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Pipelines | HEIR</title><meta name=description content="This page documents the pass pipelines available in HEIR for the heir-opt and heir-translate tools.
heir-opt heir-opt provides several pipelines to lower MLIR programs from standard dialects to FHE dialects.
--heir-simd-vectorizer Convert FHE programs with naive loops that operate on scalar types to equivalent programs that operate on vectors. This corresponds to the optimizations of the HECO compiler.
This pass is intended to process FHE programs that are known to be good for SIMD, but a specific SIMD-style FHE scheme (BGV, BFV, CKKS) has not yet been chosen."><meta property="og:title" content="Pipelines"><meta property="og:description" content="This page documents the pass pipelines available in HEIR for the heir-opt and heir-translate tools.
heir-opt heir-opt provides several pipelines to lower MLIR programs from standard dialects to FHE dialects.
--heir-simd-vectorizer Convert FHE programs with naive loops that operate on scalar types to equivalent programs that operate on vectors. This corresponds to the optimizations of the HECO compiler.
This pass is intended to process FHE programs that are known to be good for SIMD, but a specific SIMD-style FHE scheme (BGV, BFV, CKKS) has not yet been chosen."><meta property="og:type" content="article"><meta property="og:url" content="https://heir.dev/docs/pipelines/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-10-23T14:36:17-07:00"><meta itemprop=name content="Pipelines"><meta itemprop=description content="This page documents the pass pipelines available in HEIR for the heir-opt and heir-translate tools.
heir-opt heir-opt provides several pipelines to lower MLIR programs from standard dialects to FHE dialects.
--heir-simd-vectorizer Convert FHE programs with naive loops that operate on scalar types to equivalent programs that operate on vectors. This corresponds to the optimizations of the HECO compiler.
This pass is intended to process FHE programs that are known to be good for SIMD, but a specific SIMD-style FHE scheme (BGV, BFV, CKKS) has not yet been chosen."><meta itemprop=dateModified content="2025-10-23T14:36:17-07:00"><meta itemprop=wordCount content="790"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Pipelines"><meta name=twitter:description content="This page documents the pass pipelines available in HEIR for the heir-opt and heir-translate tools.
heir-opt heir-opt provides several pipelines to lower MLIR programs from standard dialects to FHE dialects.
--heir-simd-vectorizer Convert FHE programs with naive loops that operate on scalar types to equivalent programs that operate on vectors. This corresponds to the optimizations of the HECO compiler.
This pass is intended to process FHE programs that are known to be good for SIMD, but a specific SIMD-style FHE scheme (BGV, BFV, CKKS) has not yet been chosen."><link rel=preload href=/scss/main.min.dffc1689fd83830a5fb090d38ca9680587c322008ad97c675ee0ca22e5fb10d5.css as=style><link href=/scss/main.min.dffc1689fd83830a5fb090d38ca9680587c322008ad97c675ee0ca22e5fb10d5.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script>
<script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body class=td-page><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="32" fill="#fff" fill-opacity=".01"/><path d="M18.6889 10.124l7.7916 5.0511 2.6263-1.6684-2.6146-1.6779-7.8033-4.96754 2.8526 1.84162L18.6889 10.124z" fill="#efcf6f"/><path d="M29.1185 6.86125 18.6979.13981 16.06 1.79876 26.4922 8.52025l2.6263-1.659z" fill="#efcf6f"/><path d="M8.2405 6.74134 5.60033 5.07291 3.05751 6.79935 5.67334 8.49344 8.2405 6.74134z" fill="#ee958a"/><path d="M10.8697 8.49344 8.2405 10.124v3.3995l5.2049-3.3348-2.5757-1.69526z" fill="#ee958a"/><path d="M5.67334 8.49344 3.05751 6.79935 3.03318 23.4932l2.64016 1.6897V8.49344z" fill="#a32e24"/><path d="M29.1185 6.86126 26.4922 8.52025V11.8288l2.6263-1.6401V6.86126z" fill="#d38041"/><path d="M21.5415 8.70288 18.6889 6.86126V10.124l2.8526-1.42112z" fill="#d38041"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.2405 6.74134V10.124v3.3995l5.2049-3.3348V3.58723l2.6145-1.7885L16.1123 11.8484V18.467l-2.6158 1.6181L13.4574 13.5235 10.849 15.1694 8.2405 16.8152v6.678L5.67334 25.1829V8.49344L8.2405 6.74134z" fill="#dd583b"/><path d="M13.4965 20.0851 13.4574 13.5235 10.849 15.1694 10.8077 18.467l2.6888 1.6181z" fill="#a32e24"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.4454 3.58723V10.1887L10.8697 8.49344 10.9293 1.79873l2.5161 1.7885z" fill="#a32e24"/><path d="M16.0599 1.79873 13.4454.13981 10.9293 1.79873l2.5161 1.7885 2.6145-1.7885z" fill="#ee958a"/><path d="M16.06 1.79876 16.0793 5.52165 16.1123 11.8484V18.467l2.5766-1.6518V13.4696 10.124 6.86126l7.8033 4.96754V8.52025L16.06 1.79876z" fill="#e5ad11"/><path d="M18.6889 16.8152 16.1123 18.467l10.3682 6.7159V21.8372l-7.7916-5.022z" fill="#e5ad11"/><path d="M26.4805 15.1751 18.6889 10.124v3.3456l2.7505 1.7641 5.0411 3.2333V15.1751z" fill="#e5ad11"/><path d="M29.1068 13.5067l-2.6263 1.6684V18.467l2.6263-1.6518V13.5067z" fill="#d48041"/><path d="M29.1185 20.0851l-2.638 1.7521v3.3457l2.6263-1.6897L29.1185 20.0851z" fill="#d48041"/><path fill-rule="evenodd" clip-rule="evenodd" d="M26.4805 21.8372l-7.7916-5.022 2.7505-1.5815 5.0411 3.2333 2.638 1.6181-2.638 1.7521z" fill="#efcf6f"/><path d="M18.6889 13.4696v3.3456l2.7505-1.5815-2.7505-1.7641z" fill="#d48041"/><path d="M20.1621 26.5165l-4.2015-2.7017-4.2015-2.7016L11.7108 23.8491l6.3384 4.0776 2.1129 1.3512V26.5165z" fill="#395aad"/><path d="M7.49852 23.8491v2.6674l8.41958 5.4439V29.2779L7.49852 23.8491z" fill="#276e3a"/><path d="M9.57951 22.4781l-2.08099 1.371 8.41958 5.4288 2.1311-1.3512-6.3384-4.0776-2.13129-1.371z" fill="#add284"/><path d="M24.3747 26.5165V23.8491L22.174 22.8377l-2.0054.9665 2.1815 1.3793 2.0246 1.333z" fill="#395aad"/><path d="M18.0492 19.7061l2.1194 1.431-2.048 1.3721-2.1698-1.3721 2.0984-1.431z" fill="#395aad"/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.1621 18.4432l-2.0415-.596-2.1581.596-2.1017 1.3349-2.1017 1.3351 2.1012 1.3511 6.3018 4.0522 2.188-1.333-2.1815-1.3793 2.0054-.9665 2.2007 1.0114 2.0995-1.329-2.0811-1.4069L22.3501 21.1371l-.1752-1.4237L22.174 19.7061l-2.0119-1.2629zm-2.1129 1.2629 2.1194 1.431-2.048 1.3721-2.1698-1.3721 2.0984-1.431z" fill="#9ec4e0"/><path d="M26.4742 22.5201l-2.0995 1.329v2.6674l2.1289-1.3305L26.4742 22.5201z" fill="#4285f4"/><path d="M20.1621 26.5165v2.7614l2.188-1.3512V25.1835l-2.188 1.333z" fill="#4285f4"/><path d="M15.9181 29.2779v2.6825l2.1311-1.3708V27.9267l-2.1311 1.3512z" fill="#4e9c68"/></svg></span><span class=navbar-brand__name>HEIR</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/><span>Home</span></a></li><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/google/heir/ target=_blank rel=noopener><span>GitHub</span></a></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ title="HEIR: Homomorphic Encryption Intermediate Representation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Home</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ title=Documentation class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs><span>Docs</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting_started-li><a href=/docs/getting_started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting_started><span>Getting Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdevelopment-li><a href=/docs/development/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdevelopment><span>Development</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentbazel-li><a href=/docs/development/bazel/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentbazel><span>Bazel tips</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentboilerplate-li><a href=/docs/development/boilerplate/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentboilerplate><span>Boilerplate tools</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentide-li><a href=/docs/development/ide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentide><span>IDE configuration</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorials-li><a href=/docs/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorials><span>Tutorials and Talks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsresearch_with_heir-li><a href=/docs/research_with_heir/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsresearch_with_heir><span>Research with HEIR</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdesign-li><a href=/docs/design/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdesign><span>Design</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesignmanagement-li><a href=/docs/design/management/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignmanagement><span>Ciphertext Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesignlayout-li><a href=/docs/design/layout/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignlayout><span>Ciphertext Packing System</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesigndo_transformation-li><a href=/docs/design/do_transformation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesigndo_transformation><span>Data-oblivious Transformations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesignnoise-li><a href=/docs/design/noise/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignnoise><span>Noise Analysis</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesignsecret-li><a href=/docs/design/secret/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignsecret><span>Secret</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesignsimd-li><a href=/docs/design/simd/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignsimd><span>SIMD Optimizations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdesignrelinearization_ilp-li><a href=/docs/design/relinearization_ilp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdesignrelinearization_ilp><span>Optimizing relinearization</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docspipelines-li><a href=/docs/pipelines/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docspipelines><span class=td-sidebar-nav-active-item>Pipelines</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdialects-li><a href=/docs/dialects/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdialects><span>Dialects</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsbgv-li><a href=/docs/dialects/bgv/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsbgv><span>BGV</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectscggi-li><a href=/docs/dialects/cggi/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectscggi><span>CGGI</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsckks-li><a href=/docs/dialects/ckks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsckks><span>CKKS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectscomb-li><a href=/docs/dialects/comb/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectscomb><span>Comb</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsjaxite-li><a href=/docs/dialects/jaxite/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsjaxite><span>Jaxite</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsjaxiteword-li><a href=/docs/dialects/jaxiteword/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsjaxiteword><span>JaxiteWord</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectslattigo-li><a href=/docs/dialects/lattigo/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectslattigo><span>Lattigo</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectslwe-li><a href=/docs/dialects/lwe/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectslwe><span>LWE</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsmathext-li><a href=/docs/dialects/mathext/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsmathext><span>MathExt</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsmgmt-li><a href=/docs/dialects/mgmt/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsmgmt><span>Mgmt</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsmodarith-li><a href=/docs/dialects/modarith/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsmodarith><span>ModArith</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsopenfhe-li><a href=/docs/dialects/openfhe/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsopenfhe><span>Openfhe</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsorion-li><a href=/docs/dialects/orion/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsorion><span>Orion</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectspolynomial-li><a href=/docs/dialects/polynomial/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectspolynomial><span>Polynomial</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsrandom-li><a href=/docs/dialects/random/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsrandom><span>Random</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectsrns-li><a href=/docs/dialects/rns/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectsrns><span>RNS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectssecret-li><a href=/docs/dialects/secret/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectssecret><span>Secret</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectstensorext-li><a href=/docs/dialects/tensorext/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectstensorext><span>TensorExt</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectstfherust-li><a href=/docs/dialects/tfherust/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectstfherust><span>TfheRust</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdialectstfherustbool-li><a href=/docs/dialects/tfherustbool/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdialectstfherustbool><span>TfheRustBool</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspasses-li><a href=/docs/passes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspasses><span>Passes</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-community-li><a href=/community/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-community><span>Community</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-search-li><a href=/search/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-search><span>Search Results</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a id=print href=https://heir.dev/docs/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#heir-opt><code>heir-opt</code></a><ul><li><a href=#--heir-simd-vectorizer><code>--heir-simd-vectorizer</code></a></li><li><a href=#--mlir-to-cggi><code>--mlir-to-cggi</code></a></li><li><a href=#--mlir-to-secret-arithmetic><code>--mlir-to-secret-arithmetic</code></a></li><li><a href=#--mlir-to-bgv---mlir-to-bfv---mlir-to-ckks><code>--mlir-to-bgv</code>, <code>--mlir-to-bfv</code>, <code>--mlir-to-ckks</code></a></li><li><a href=#--scheme-to-openfhe><code>--scheme-to-openfhe</code></a></li><li><a href=#--scheme-to-lattigo><code>--scheme-to-lattigo</code></a></li><li><a href=#--scheme-to-tfhe-rs><code>--scheme-to-tfhe-rs</code></a></li><li><a href=#--scheme-to-fpt><code>--scheme-to-fpt</code></a></li><li><a href=#--scheme-to-jaxite><code>--scheme-to-jaxite</code></a></li><li><a href=#--torch-linalg-to-ckks><code>--torch-linalg-to-ckks</code></a></li><li><a href=#--convert-to-data-oblivious><code>--convert-to-data-oblivious</code></a></li><li><a href=#--math-to-polynomial-approximation><code>--math-to-polynomial-approximation</code></a></li></ul></li><li><a href=#heir-translate><code>heir-translate</code></a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://heir.dev/docs/>Docs</a></li><li class="breadcrumb-item active" aria-current=page>Pipelines</li></ol></nav><div class=td-content><h1>Pipelines</h1><header class=article-meta></header><p>This page documents the pass pipelines available in HEIR for the <code>heir-opt</code> and
<code>heir-translate</code> tools.</p><h2 id=heir-opt><code>heir-opt</code></h2><p><code>heir-opt</code> provides several pipelines to lower MLIR programs from standard
dialects to FHE dialects.</p><h3 id=--heir-simd-vectorizer><code>--heir-simd-vectorizer</code></h3><p>Convert FHE programs with naive loops that operate on scalar types to equivalent
programs that operate on vectors. This corresponds to the optimizations of the
<a href=https://github.com/MarbleHE/HECO>HECO compiler</a>.</p><p>This pass is intended to process FHE programs that are known to be good for
SIMD, but a specific SIMD-style FHE scheme (BGV, BFV, CKKS) has not yet been
chosen. It expects to handle <code>arith</code> ops operating on <code>tensor</code> types (with or
without <code>secret.generic</code>).</p><p>The pass unrolls all loops, and assumes the input data can be packed in a single
ciphertext, interpreted as vectors of slots. For well-structured loops, the
resulting SIMD operations can be converted to use minimal ciphertext rotation
ops.</p><h3 id=--mlir-to-cggi><code>--mlir-to-cggi</code></h3><p>Converts MLIR IR to the CGGI dialect defined by HEIR. It can either booleanize
the IR and optimize the circuit using Yosys optimizations, or convert integer
arithmetic to CGGI.</p><p>This pipeline has a <code>dataType</code> option, which can be <code>Bool</code> or <code>Integer</code>.</p><ul><li>When <code>dataType</code> is <code>Bool</code>, the pipeline first bufferizes and applies affine
transformations. Then, it uses Yosys to synthesize the logic into a boolean or
small-integer arithmetic circuit using <code>comb.truth_table</code> ops to represent
programmable bootstrap operations. Finally, it converts the boolean circuit to
the CGGI dialect.</li><li>When <code>dataType</code> is <code>Integer</code>, the pipeline converts <code>arith</code> dialect operations
to the CGGI dialect. This is useful for targeting backends that have native
support for high-bitwidth FHE arithmetic, such as <code>tfhe-rs</code>.</li></ul><p>The pass requires that the environment variable <code>HEIR_ABC_BINARY</code> contains the
location of the ABC binary and that <code>HEIR_YOSYS_SCRIPTS_DIR</code> contains the
location of the Yosys&rsquo; techlib files that are needed to execute the path. This
is only needed when <code>dataType</code> is <code>Bool</code>.</p><h3 id=--mlir-to-secret-arithmetic><code>--mlir-to-secret-arithmetic</code></h3><p>Converts a function using standard MLIR dialects to the <code>secret</code> dialect with
arithmetic operations. This pipeline is a precursor to lowering to specific
RLWE-based FHE schemes. It performs several transformations:</p><ul><li>Applies data-oblivious transforms to remove data-dependent control flow.</li><li>Performs layout optimization to efficiently pack data in ciphertexts.</li><li>Adds a client interface with helper functions for encryption and decryption.</li></ul><p>This pass requires secret <code>func.func</code> inputs to be annotated with the
<code>{secret.secret}</code> attribute.</p><h3 id=--mlir-to-bgv---mlir-to-bfv---mlir-to-ckks><code>--mlir-to-bgv</code>, <code>--mlir-to-bfv</code>, <code>--mlir-to-ckks</code></h3><p>These pipelines convert a function using standard MLIR dialects to a specific
RLWE-based FHE scheme: BGV, BFV, or CKKS. They all use the
<code>--mlir-to-secret-arithmetic</code> pipeline to perform the initial lowering to secret
arithmetic. Then, they perform scheme-specific transformations, including:</p><ul><li>Inserting and optimizing ciphertext management operations like modulus
switching, relinearization, and bootstrapping.</li><li>Performing scheme-specific parameter generation and noise analysis.</li><li>Lowering the <code>secret</code> dialect to the target FHE dialect (<code>bgv</code>, <code>bfv</code>, or
<code>ckks</code>).</li></ul><h3 id=--scheme-to-openfhe><code>--scheme-to-openfhe</code></h3><p>Converts code expressed at the FHE scheme level (BGV, BFV, CKKS) to the
<code>openfhe</code> dialect, from which <code>heir-translate</code> can generate C++ code using the
OpenFHE library, or else the MLIR can be interpreted using OpenFHE calls.</p><h3 id=--scheme-to-lattigo><code>--scheme-to-lattigo</code></h3><p>Converts code expressed at the FHE scheme level (BGV, BFV, CKKS) to the
<code>lattigo</code> dialect, from which <code>heir-translate</code> can generate Go code using the
Lattigo library.</p><h3 id=--scheme-to-tfhe-rs><code>--scheme-to-tfhe-rs</code></h3><p>Converts code expressed in the CGGI dialect to the <code>tfhe_rust</code> dialect, from
which <code>heir-translate</code> can generate Rust code using the <code>thfe-rs</code> library.</p><h3 id=--scheme-to-fpt><code>--scheme-to-fpt</code></h3><p>Converts code expressed in the CGGI dialect to the <code>tfhe_rust_bool</code> dialect.
This pipeline is used for targeting the FPT and Belfort FPGA mirrors of the
<code>tfhe-rs</code> API.</p><h3 id=--scheme-to-jaxite><code>--scheme-to-jaxite</code></h3><p>Converts code expressed in the CGGI dialect to the <code>jaxite</code> dialect, from which
<code>heir-translate</code> can generate Python code using the Jaxite library.</p><h3 id=--torch-linalg-to-ckks><code>--torch-linalg-to-ckks</code></h3><p>Converts a <code>linalg</code> MLIR program exported from PyTorch to the CKKS FHE scheme.
It first applies <code>linalg</code> preprocessing passes and then uses the
<code>--mlir-to-ckks</code> pipeline.</p><h3 id=--convert-to-data-oblivious><code>--convert-to-data-oblivious</code></h3><p>Transforms a program to be data-oblivious by converting control flow on secret
data (e.g., <code>if</code>, <code>for</code>, <code>while</code>) into data-independent operations.</p><h3 id=--math-to-polynomial-approximation><code>--math-to-polynomial-approximation</code></h3><p>Approximates math operations that cannot be expressed in FHE using polynomial
approximations. This is a sub-pipeline of most other pipelines, exposed for
testing purposes.</p><h2 id=heir-translate><code>heir-translate</code></h2><p><code>heir-translate</code> is a tool for translating MLIR dialects to various output
formats. <code>heir-translate</code> supports the following emitters:</p><ul><li><code>--emit-function-info</code>: Emits function signature information.</li><li><code>--emit-jaxite</code>: Emits Python code for the Jaxite TPU library&rsquo;s CGGI
implementation.</li><li><code>--emit-jaxiteword</code>: Emits Python code for the Jaxite TPU library&rsquo;s CKKS
implementation.</li><li><code>--emit-lattigo</code>: Emits Go code for the Lattigo library.</li><li><code>--emit-metadata</code>: Emits a json object describing function signatures.</li><li><code>--emit-openfhe-pke-header</code>: Emits a C++ header for the OpenFHE library.</li><li><code>--emit-openfhe-pke-pybind</code>: Emits pybind11 bindings for the OpenFHE library.</li><li><code>--emit-openfhe-pke</code>: Emits C++ code for the OpenFHE library.</li><li><code>--emit-simfhe</code>: Exports code that can be evaluated with the SimFHE simulator.</li><li><code>--emit-tfhe-rust-bool</code>: Emits <code>tfhe-rs</code> code against the boolean API.</li><li><code>--emit-tfhe-rust-hl</code>: Emits <code>tfhe-rs</code> code against the integer API.</li><li><code>--emit-tfhe-rust</code>: Emits <code>tfhe-rs</code> code against the <code>shortint</code> API.</li><li><code>--emit-verilog</code>: Emits verilog code for <code>arith</code> and <code>memref</code> programs. Used
for integration with Yosys.</li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/google/heir aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"><span>&copy; 2025 The HEIR Authors All Rights Reserved</span>
<span class=ms-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.027d75d71824837bee74c12a7806c5fe51249c1ca7accc27553a251a75cdb3a4.js integrity="sha256-An111xgkg3vudMEqeAbF/lEknBynrMwnVTolGnXNs6Q=" crossorigin=anonymous></script>
<script defer src=/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>